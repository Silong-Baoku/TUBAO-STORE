<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>图包商店 - 优化版</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
  <style>
    /* 省略原有样式以节省空间，只添加修改和新增部分 */
     :root {
      --deep-blue: #0d47a1;
      --medium-blue: #1976d2;
      --light-blue: #90caf9;
      --neon-blue: #00b0ff;
      --neon-light: #e3f2fd;
      --white: #FFFFFF;
      --black: #0a1929;
      --dark-bg: #0a1929;
      --card-bg: rgba(25, 118, 210, 0.15);
      --glass-bg: rgba(25, 118, 210, 0.25);
      --success: #4caf50;
      --warning: #ff9800;
      --danger: #f44336;
      --diamond: #b9f2ff;
      --gold: #ffd700;
      --diamond-gradient: linear-gradient(135deg, #b9f2ff, #70e4ff, #00b0ff);
      --gold-gradient: linear-gradient(135deg, #ffd700, #ffcc00, #ffa500);
      --nav-height: 80px;
      
      /* 紫罗兰主题变量 */
      --deep-violet: #4a148c;
      --medium-violet: #7b1fa2;
      --light-violet: #ba68c8;
      --neon-violet: #e040fb;
      --neon-violet-light: #f3e5f5;
      --dark-bg-violet: #12071f;
      --card-bg-violet: rgba(123, 31, 162, 0.15);
      
      /* TSHB货币颜色 */
      --tshb-primary: #9c27b0;
      --tshb-secondary: #e040fb;
      --tshb-gradient: linear-gradient(135deg, #ba68c8, #e040fb, #7b1fa2);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: var(--dark-bg);
      color: var(--white);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      background-image: radial-gradient(circle at 10% 20%, rgba(25, 118, 210, 0.1) 0%, rgba(10, 25, 41, 1) 80%);
      transition: background 0.5s ease;
    }
    
    body.violet-theme {
      background: var(--dark-bg-violet);
      background-image: radial-gradient(circle at 10% 20%, rgba(123, 31, 162, 0.1) 0%, rgba(18, 7, 31, 1) 80%);
      --deep-blue: var(--deep-violet);
      --medium-blue: var(--medium-violet);
      --light-blue: var(--light-violet);
      --neon-blue: var(--neon-violet);
      --neon-light: var(--neon-violet-light);
      --dark-bg: var(--dark-bg-violet);
      --card-bg: var(--card-bg-violet);
    }
    
    /* 增强背景效果 */
    .background-effects {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      overflow: hidden;
    }
    
    .geometric-shape {
      position: absolute;
      border: 1px solid var(--medium-blue);
      opacity: 0.3;
      transition: all 5s linear;
    }
    
    .light-spot {
      position: absolute;
      width: 10px;
      height: 10px;
      background: var(--neon-blue);
      border-radius: 50%;
      box-shadow: 0 0 15px 5px var(--neon-blue);
      opacity: 0;
      animation: blink 4s infinite;
    }
    
    .neon-pulse {
      position: absolute;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(0, 176, 255, 0.3) 0%, rgba(0, 176, 255, 0) 70%);
      filter: blur(20px);
      opacity: 0;
      animation: pulse 8s infinite;
    }
    
    @keyframes blink {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0; transform: scale(0.5); }
      50% { opacity: 0.6; transform: scale(1.5); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    
    @keyframes shine {
      0% { background-position: -100px; }
      100% { background-position: 200px; }
    }
    
    /* 顶部导航 */
    .header {
      padding: 10px 0;
      text-align: center;
      position: relative;
      z-index: 10;
      background: rgba(10, 25, 41, 0.7);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--medium-blue);
      box-shadow: 0 5px 30px rgba(25, 118, 210, 0.4);
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: all 0.5s ease;
    }
    
    .violet-theme .header {
      background: rgba(18, 7, 31, 0.7);
      border-bottom: 1px solid var(--medium-violet);
      box-shadow: 0 5px 30px rgba(123, 31, 162, 0.4);
    }
    
    /* 货币展示区容器 */
    .currency-container {
      max-width: 600px;
      margin: 15px auto;
    }
    
    /* 货币展示框 */
    .currency-display {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px; /* 缩短间距 */
      background: rgba(0, 0, 0, 0.4);
      padding: 10px 10px; /* 减小内边距 */
      border-radius: 20px;
      border: 1px solid var(--diamond);
      box-shadow: 0 0 15px rgba(185, 242, 255, 0.3);
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .violet-theme .currency-display {
      border: 1px solid var(--neon-violet);
      box-shadow: 0 0 15px rgba(224, 64, 251, 0.3);
    }
    
    /* 货币项目 */
    .currency-item {
      display: flex;
      align-items: center;
      gap: 6px; /* 减小间距 */
      padding: 5px 5px; /* 减小内边距 */
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
      font-size: 0.9rem; /* 减小字体 */
    }
    
    .currency-item:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-3px);
    }
    
    /* 货币图标 */
    .diamond-icon, .gold-icon, .tshb-icon {
      font-size: 1.1rem; /* 减小图标 */
      width: 10px;
      text-align: center;
    }
    
    .diamond-icon {
      color: var(--diamond);
    }
    
    .gold-icon {
      color: var(--gold);
    }
    
    .violet-theme .diamond-icon,
    .violet-theme .gold-icon {
      color: var(--neon-violet);
    }
    
    /* TSHB图标使用图片 */
    .tshb-icon {
      width: 20px;
      height: 20px;
      background: url('tshb.png') center/contain no-repeat;
    }
    
    .violet-theme .tshb-icon {
      background: url('tshb.png') center/contain no-repeat;
    }
    
    /* 货币数量 */
    .currency-amount {
      font-weight: bold;
      font-size: 1rem; /* 减小字体 */
      min-width: 25px;
      text-align: center;
    }
    
    .diamond-amount {
      background: var(--diamond-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .violet-theme .diamond-amount {
      background: linear-gradient(135deg, #ba68c8, #e040fb, #7b1fa2);
    }
    
    .gold-amount {
      background: var(--gold-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .violet-theme .gold-amount {
      background: linear-gradient(135deg, #ffd700, #ffcc00, #ffa500);
    }
    
    .tshb-amount {
      background: var(--tshb-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    /* 按钮区域 */
    .nav-buttons {
      display: flex;
      gap: 0px; /* 减小间距 */
      margin-top: 1px;
      justify-content: center;
      width: 100%;
      flex-wrap: wrap;
      align-items: center;
    }
    
    .signin-btn {
      background: var(--gold-gradient);
      color: var(--black);
      border: none;
      padding: 8px 20px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
    }
    
    .violet-theme .signin-btn {
      background: linear-gradient(135deg, #ba68c8, #e040fb);
      color: #fff;
    }
    
    .signin-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px var(--gold);
    }
    
    .violet-theme .signin-btn:hover {
      box-shadow: 0 0 20px var(--neon-violet);
    }
    
    .signin-btn.disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .redeem-btn {
      background: transparent;
      color: var(--white);
      border: 1px solid var(--diamond);
      padding: 8px 20px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .violet-theme .redeem-btn {
      border: 1px solid var(--neon-violet);
    }
    
    .redeem-btn:hover {
      background: rgba(185, 242, 255, 0.1);
      box-shadow: 0 0 15px rgba(185, 242, 255, 0.3);
    }
    
    .violet-theme .redeem-btn:hover {
      background: rgba(123, 31, 162, 0.1);
      box-shadow: 0 0 15px rgba(123, 31, 162, 0.3);
    }
    
    .redeem-btn.disabled {
      opacity: 0.6;
      cursor: not-allowed;
      background: rgba(144, 202, 249, 0.1);
    }
    
.theme-toggle {
    background: transparent !important;
    border: 1px solid var(--medium-violet); /* 直接使用紫罗兰边框 */
    border-radius: 30px; /* 保持圆角 */
    color: var(--neon-violet); /* 紫罗兰文字色 */
    font-size: 1rem; /* 缩小字体（原1.4rem） */
    cursor: pointer;
    width: auto;
    height: auto;
    padding: 2px 10px; /* 缩小内边距（原8px 10px），减少上下高度 */
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 1;
}

/* 渐变边框同步缩小，与按钮保持一致 */
.theme-toggle::before {
    content: '';
    position: absolute;
    top: -1px; /* 原-2px，减少向外扩展的范围 */
    left: -1px; /* 原-2px */
    right: -1px; /* 原-2px */
    bottom: -1px; /* 原-2px */
    background: linear-gradient(45deg, var(--deep-violet), var(--medium-violet), var(--neon-violet));
    z-index: -1;
    border-radius: 20px; /* 比按钮圆角大1px即可（原30px） */
    opacity: 0.7;
}

.theme-toggle:hover {
    background: transparent !important;
    box-shadow: 0 0 10px var(--neon-violet); /* 适当缩小发光范围 */
}


/* 紫罗兰主题下的样式调整 */
.violet-theme .theme-toggle {
    color: var(--neon-violet);
    border-color: var(--medium-violet); /* 紫罗兰主题下的基础边框 */
}

.violet-theme .theme-toggle::before {
    background: linear-gradient(45deg, var(--deep-violet), var(--medium-violet), var(--neon-violet));
}

.violet-theme .theme-toggle:hover {
    box-shadow: 0 0 15px var(--neon-violet); /* 紫罗兰主题下hover的发光效果 */
}

    
    /* 标题区域 */
    .logo-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .logo {
      font-size: 2.2rem;
      font-weight: 800;
      text-transform: uppercase;
      position: relative;
      display: inline-block;
      color: var(--white);
      text-shadow: 0 0 10px var(--neon-blue);
      letter-spacing: 3px;
      transition: all 0.3s ease;
      margin-bottom: 15px;
    }
    
    .violet-theme .logo {
      text-shadow: 0 0 10px var(--neon-violet);
    }
    
    .logo:hover {
      text-shadow: 0 0 20px var(--neon-blue);
      transform: scale(1.05);
    }
    
    .violet-theme .logo:hover {
      text-shadow: 0 0 20px var(--neon-violet);
    }
    
    .logo::before {
      content: '';
      position: absolute;
      top: -5px;
      left: -10px;
      right: -10px;
      bottom: -5px;
      background: linear-gradient(45deg, var(--deep-blue), var(--medium-blue), var(--neon-blue));
      z-index: -1;
      border-radius: 10px;
      filter: blur(15px);
      opacity: 0.7;
      animation: neonFlow 3s infinite alternate;
    }
    
    .violet-theme .logo::before {
      background: linear-gradient(45deg, var(--deep-violet), var(--medium-violet), var(--neon-violet));
    }
    
    .logo::after {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, var(--deep-blue), var(--medium-blue), var(--neon-blue));
      z-index: -1;
      border-radius: 10px;
      animation: neonFlow 3s infinite alternate-reverse;
    }
    
    .violet-theme .logo::after {
      background: linear-gradient(45deg, var(--deep-violet), var(--medium-violet), var(--neon-violet));
    }
    
    @keyframes neonFlow {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }
    
    /* 搜索区域 */
    .search-container {
      max-width: 600px;
      margin: 15 auto;
      position: relative;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .search-bar {
      width: 100%;
      padding: 12px 20px;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      color: var(--white);
      font-size: 1rem;
      box-shadow: 0 0 15px rgba(25, 118, 210, 0.5);
      border: 1px solid var(--medium-blue);
      transition: all 0.3s ease;
    }
    
    .violet-theme .search-bar {
      border: 1px solid var(--medium-violet);
      box-shadow: 0 0 15px rgba(123, 31, 162, 0.5);
    }
    
    .search-bar:focus {
      outline: none;
      box-shadow: 0 0 25px var(--neon-blue);
      border-color: var(--neon-blue);
    }
    
    .violet-theme .search-bar:focus {
      box-shadow: 0 0 25px var(--neon-violet);
      border-color: var(--neon-violet);
    }
    
    .search-bar::placeholder {
      color: var(--neon-light);
      opacity: 0.7;
    }
    
    .search-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: transparent;
      border: none;
      color: var(--white);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .search-btn:hover {
      color: var(--neon-blue);
      transform: translateY(-50%) scale(1.1);
    }
    
    .violet-theme .search-btn:hover {
      color: var(--neon-violet);
    }
    
    /* 主体内容 */
    .main-content {
      max-width: 1200px;
      margin: 25px auto;
      padding: 0 20px;
    }
    
    .section-title {
      font-size: 1.8rem;
      margin-bottom: 20px;
      position: relative;
      padding-bottom: 8px;
      text-shadow: 0 0 8px var(--neon-blue);
      text-align: center;
    }
    
    .violet-theme .section-title {
      text-shadow: 0 0 8px var(--neon-violet);
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 2px;
      background: var(--neon-blue);
      border-radius: 3px;
      box-shadow: 0 0 8px var(--neon-blue);
    }
    
    .violet-theme .section-title::after {
      background: var(--neon-violet);
      box-shadow: 0 0 8px var(--neon-violet);
    }
    
    .categories {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 30px;
      justify-content: center;
    }
    
    .category-btn {
      padding: 10px 20px;
      border-radius: 30px;
      background: rgba(25, 118, 210, 0.2);
      border: 1px solid var(--medium-blue);
      color: var(--white);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
    }
    
    .violet-theme .category-btn {
      background: rgba(123, 31, 162, 0.2);
      border: 1px solid var(--medium-violet);
    }
    
    .category-btn:hover, .category-btn.active {
      background: rgba(0, 176, 255, 0.3);
      box-shadow: 0 0 12px var(--neon-blue);
      border-color: var(--neon-blue);
      transform: translateY(-3px);
    }
    
    .violet-theme .category-btn:hover, 
    .violet-theme .category-btn.active {
      background: rgba(123, 31, 162, 0.3);
      box-shadow: 0 0 12px var(--neon-violet);
      border-color: var(--neon-violet);
    }
    
    /* 商品展示区 - 增强 */
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }
    
    @media (max-width: 900px) {
      .products {
        grid-template-columns: 1fr;
      }
    }
    
    .product-card {
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      overflow: hidden;
      border: 1px solid var(--medium-blue);
      box-shadow: 0 0 15px rgba(25, 118, 210, 0.3);
      transition: all 0.3s ease;
      position: relative;
    }
    
    .violet-theme .product-card {
      background: var(--card-bg-violet);
      border: 1px solid var(--medium-violet);
      box-shadow: 0 0 15px rgba(123, 31, 162, 0.3);
    }
    
    .product-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 0 25px var(--neon-blue);
    }
    
    .violet-theme .product-card:hover {
      box-shadow: 0 0 25px var(--neon-violet);
    }
    
    .product-card::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, var(--deep-blue), var(--medium-blue), var(--neon-blue));
      z-index: -1;
      border-radius: 17px;
      animation: neonFlow 3s infinite;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .violet-theme .product-card::before {
      background: linear-gradient(45deg, var(--deep-violet), var(--medium-violet), var(--neon-violet));
    }
    
    .product-card:hover::before {
      opacity: 1;
    }
    
    .product-image {
      height: 240px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--deep-blue), var(--medium-blue));
      overflow: hidden;
      position: relative;
    }
    
    .violet-theme .product-image {
      background: linear-gradient(135deg, var(--deep-violet), var(--medium-violet));
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .gold-lock-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .gold-lock-overlay i {
      font-size: 4rem;
      color: var(--neon-violet);
      text-shadow: 0 0 15px var(--neon-violet);
    }
    
    .product-card.gold-locked .gold-lock-overlay {
      opacity: 1;
    }
    
    .product-card:hover .product-image img {
      transform: scale(1.05);
    }
    
    .product-tag {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--neon-blue);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      box-shadow: 0 0 8px var(--neon-blue);
      z-index: 2;
    }
    
    .violet-theme .product-tag {
      background: var(--neon-violet);
      box-shadow: 0 0 8px var(--neon-violet);
    }
    
    .product-price {
      position: absolute;
      top: 8px;
      left: 8px;
      color: var(--black);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      box-shadow: 0 0 8px rgba(185, 242, 255, 0.5);
      z-index: 2;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .gold-price {
      background: var(--gold-gradient);
    }
    
    .diamond-price {
      background: var(--diamond-gradient);
    }
    
    .tshb-price {
      background: var(--tshb-gradient);
    }
    
    .violet-theme .diamond-price {
      background: linear-gradient(135deg, #ba68c8, #e040fb, #7b1fa2);
    }
    
    .product-content {
      padding: 20px;
    }
    
    .product-name {
      font-size: 1.4rem;
      font-weight: bold;
      margin-bottom: 12px;
      color: var(--white);
      text-align: center;
    }
    
    .product-desc {
      margin-bottom: 20px;
      line-height: 1.6;
      color: var(--neon-light);
      min-height: 60px;
      font-size: 0.95rem;
      text-align: center;
      padding: 0 10px;
    }
    
    .download-btn {
      display: block;
      width: 100%;
      padding: 12px;
      background: transparent;
      border: 1px solid var(--medium-blue);
      border-radius: 8px;
      color: var(--white);
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .violet-theme .download-btn {
      border: 1px solid var(--medium-violet);
    }
    
    .download-btn:hover {
      background: var(--neon-blue);
      box-shadow: 0 0 15px var(--neon-blue);
      letter-spacing: 0.5px;
    }
    
    .violet-theme .download-btn:hover {
      background: var(--neon-violet);
      box-shadow: 0 0 15px var(--neon-violet);
    }
    
    .download-btn.locked {
      background: rgba(255, 215, 0, 0.2);
      border: 1px solid var(--gold);
      color: var(--gold);
    }
    
    .download-btn.tshb-locked {
      background: rgba(156, 39, 176, 0.2);
      border: 1px solid var(--tshb-secondary);
      color: var(--tshb-secondary);
    }
    
    .violet-theme .download-btn.locked {
      background: rgba(123, 31, 162, 0.2);
      border: 1px solid var(--neon-violet);
      color: var(--neon-violet);
    }
    
    .download-btn.diamond-locked {
      background: rgba(185, 242, 255, 0.2);
      border: 1px solid var(--diamond);
      color: var(--diamond);
    }
    
    .violet-theme .download-btn.diamond-locked {
      background: rgba(123, 31, 162, 0.2);
      border: 1px solid var(--neon-violet);
      color: var(--neon-violet);
    }
    
    .download-btn.diamond-locked:hover {
      background: rgba(185, 242, 255, 0.3);
      box-shadow: 0 0 15px var(--diamond);
    }
    
    .violet-theme .download-btn.diamond-locked:hover {
      background: rgba(123, 31, 162, 0.3);
      box-shadow: 0 0 15px var(--neon-violet);
    }
    
    /* 响应式调整 */
    @media (max-width: 768px) {
      .products {
        grid-template-columns: 1fr;
      }
      
      .logo {
        font-size: 1.8rem;
      }
      
      .product-image {
        height: 200px;
      }
      
      .product-name {
        font-size: 1.3rem;
      }
      
      .currency-container {
        flex-direction: column;
        align-items: center;
      }
      
      .currency-display {
        flex-direction: row;
        flex-wrap: wrap;
        gap: 10px;
      }
      
      .currency-item {
        width: auto;
        justify-content: center;
      }
    }
    
    @media (max-width: 480px) {
      .logo {
        font-size: 1.6rem;
      }
      
      .section-title {
        font-size: 1.5rem;
      }
      
      .search-bar {
        padding: 10px 18px;
        font-size: 0.95rem;
      }
      
      .product-image {
        height: 180px;
      }
      
      .product-name {
        font-size: 1.2rem;
      }
      
      .nav-buttons {
        flex-direction: row;
        align-items: center;
        gap: 8px;
      }
      
      .signin-btn, .redeem-btn {
        padding: 8px 15px;
        font-size: 0.9rem;
      }
    }
    
    /* 通知提示 */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      background: var(--success);
      color: white;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      z-index: 2000;
      transform: translateX(150%);
      transition: transform 0.5s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.9rem;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.error {
      background: var(--danger);
    }
    
    .notification.warning {
      background: var(--warning);
    }
    
    .notification.info {
      background: var(--neon-blue);
    }
    
    .violet-theme .notification.info {
      background: var(--neon-violet);
    }
    
    /* 高亮效果 */
    .highlight {
      animation: highlight 2s ease;
    }
    
    @keyframes highlight {
      0% { box-shadow: 0 0 0 0 rgba(0, 176, 255, 0.7); }
      70% { box-shadow: 0 0 0 20px rgba(0, 176, 255, 0); }
      100% { box-shadow: 0 0 0 0 rgba(0, 176, 255, 0); }
    }
    
    /* 动画类 */
    .clicked {
      animation: clickEffect 0.3s ease;
    }
    
    @keyframes clickEffect {
      0% { transform: scale(1); }
      50% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }
    
    /* 页脚样式 */
    .footer {
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      color: var(--light-blue);
      font-size: 0.85rem;
      border-top: 1px solid rgba(25, 118, 210, 0.3);
    }
    
    .violet-theme .footer {
      color: var(--light-violet);
      border-top: 1px solid rgba(123, 31, 162, 0.3);
    }
    
    .footer a {
      color: var(--neon-blue);
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .violet-theme .footer a {
      color: var(--neon-violet);
    }
    
    .footer a:hover {
      text-shadow: 0 0 8px var(--neon-blue);
    }
    
    .violet-theme .footer a:hover {
      text-shadow: 0 0 8px var(--neon-violet);
    }
    
    /* 商品详情弹窗 */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .product-modal {
      width: 90%;
      max-width: 900px;
      max-height: 90vh;
      background: rgba(10, 25, 41, 0.95);
      border-radius: 15px;
      overflow: hidden;
      border: 1px solid var(--medium-blue);
      box-shadow: 0 0 30px var(--neon-blue);
      display: flex;
      flex-direction: column;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .violet-theme .product-modal {
      background: rgba(18, 7, 31, 0.95);
      border: 1px solid var(--medium-violet);
      box-shadow: 0 0 30px var(--neon-violet);
    }
    
    .modal-overlay.active .product-modal {
      transform: scale(1);
    }
    
    .modal-header {
      padding: 16px 20px;
      background: rgba(25, 118, 210, 0.2);
      border-bottom: 1px solid var(--medium-blue);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .violet-theme .modal-header {
      background: rgba(123, 31, 162, 0.2);
      border-bottom: 1px solid var(--medium-violet);
    }
    
    .modal-title {
      font-size: 1.6rem;
      font-weight: bold;
      color: var(--white);
      text-shadow: 0 0 8px var(--neon-blue);
    }
    
    .violet-theme .modal-title {
      text-shadow: 0 0 8px var(--neon-violet);
    }
    
    .close-modal {
      background: transparent;
      border: none;
      color: var(--light-blue);
      font-size: 1.6rem;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }
    
    .violet-theme .close-modal {
      color: var(--light-violet);
    }
    
    .close-modal:hover {
      color: var(--neon-blue);
      transform: rotate(90deg);
    }
    
    .violet-theme .close-modal:hover {
      color: var(--neon-violet);
    }
    
    .modal-content {
      display: flex;
      flex-direction: row;
      padding: 0;
      overflow: hidden;
      flex: 1;
    }
    
    @media (max-width: 768px) {
      .modal-content {
        flex-direction: column;
      }
    }
    
    .modal-image-container {
      flex: 1;
      min-height: 250px;
      background: linear-gradient(135deg, var(--deep-blue), var(--black));
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 15px;
    }
    
    .violet-theme .modal-image-container {
      background: linear-gradient(135deg, var(--deep-violet), var(--dark-bg-violet));
    }
    
    .modal-image {
      max-width: 100%;
      max-height: 350px;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    }
    
    .modal-details {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    
    .modal-section {
      margin-bottom: 20px;
    }
    
    .section-heading {
      font-size: 1.2rem;
      margin-bottom: 12px;
      color: var(--neon-blue);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .violet-theme .section-heading {
      color: var(--neon-violet);
    }
    
    .section-heading i {
      font-size: 1rem;
    }
    
    .product-desc-modal {
      line-height: 1.6;
      color: var(--neon-light);
      font-size: 0.95rem;
    }
    
    .violet-theme .product-desc-modal {
      color: var(--neon-violet-light);
    }
    
    .download-options {
      margin-top: 25px;
      padding-top: 15px;
      border-top: 1px solid rgba(144, 202, 249, 0.2);
    }
    
    .violet-theme .download-options {
      border-top: 1px solid rgba(123, 31, 162, 0.2);
    }
    
    .download-title {
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.2rem;
      color: var(--neon-blue);
    }
    
    .violet-theme .download-title {
      color: var(--neon-violet);
    }
    
    .download-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    
    .download-option {
      min-width: 160px;
      padding: 12px 15px;
      border-radius: 8px;
      background: rgba(25, 118, 210, 0.2);
      border: 1px solid var(--medium-blue);
      color: var(--white);
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      text-align: center;
    }
    
    .violet-theme .download-option {
      background: rgba(123, 31, 162, 0.2);
      border: 1px solid var(--medium-violet);
    }
    
    .download-option:hover {
      background: var(--neon-blue);
      box-shadow: 0 0 15px var(--neon-blue);
      transform: translateY(-3px);
    }
    
    .violet-theme .download-option:hover {
      background: var(--neon-violet);
      box-shadow: 0 0 15px var(--neon-violet);
    }
    
    .option-icon {
      font-size: 1.6rem;
    }
    
    .option-name {
      font-size: 1rem;
    }
    
    .option-desc {
      font-size: 0.8rem;
      color: var(--light-blue);
    }
    
    .violet-theme .option-desc {
      color: var(--light-violet);
    }
    
    /* 充值弹窗 */
    .recharge-modal {
      width: 90%;
      max-width: 500px;
      background: rgba(10, 25, 41, 0.95);
      border-radius: 15px;
      overflow: hidden;
      border: 1px solid var(--diamond);
      box-shadow: 0 0 30px rgba(185, 242, 255, 0.5);
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .violet-theme .recharge-modal {
      background: rgba(18, 7, 31, 0.95);
      border: 1px solid var(--neon-violet);
      box-shadow: 0 0 30px rgba(224, 64, 251, 0.5);
    }
    
    .modal-overlay.active .recharge-modal {
      transform: scale(1);
    }
    
    .recharge-header {
      padding: 16px 20px;
      background: rgba(185, 242, 255, 0.2);
      border-bottom: 1px solid var(--diamond);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .violet-theme .recharge-header {
      background: rgba(123, 31, 162, 0.2);
      border-bottom: 1px solid var(--neon-violet);
    }
    
    .recharge-title {
      font-size: 1.6rem;
      font-weight: bold;
      color: var(--white);
      text-shadow: 0 0 8px var(--diamond);
    }
    
    .violet-theme .recharge-title {
      text-shadow: 0 0 8px var(--neon-violet);
    }
    
    .recharge-content {
      padding: 25px;
    }
    
    .recharge-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .recharge-option {
      padding: 20px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid var(--medium-blue);
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .violet-theme .recharge-option {
      border: 1px solid var(--medium-violet);
    }
    
    .recharge-option.selected {
      background: rgba(0, 176, 255, 0.3);
      border-color: var(--neon-blue);
      box-shadow: 0 0 15px var(--neon-blue);
      transform: translateY(-5px);
    }
    
    .violet-theme .recharge-option.selected {
      background: rgba(123, 31, 162, 0.3);
      border-color: var(--neon-violet);
      box-shadow: 0 0 15px var(--neon-violet);
    }
    
    .recharge-option.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .recharge-icon {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .diamond-option .recharge-icon {
      color: var(--diamond);
    }
    
    .violet-theme .diamond-option .recharge-icon {
      color: var(--neon-violet);
    }
    
    .gold-option .recharge-icon {
      color: var(--gold);
    }
    
    .tshb-option .recharge-icon {
      color: var(--tshb-secondary);
    }
    
    .recharge-amount {
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .recharge-price {
      color: var(--neon-light);
      font-size: 1.1rem;
    }
    
    .recharge-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .form-label {
      font-size: 1rem;
      color: var(--neon-light);
    }
    
    .form-input {
      padding: 12px 15px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid var(--diamond);
      color: var(--white);
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .violet-theme .form-input {
      border: 1px solid var(--neon-violet);
    }
    
    .form-input:focus {
      outline: none;
      box-shadow: 0 0 15px var(--diamond);
      border-color: var(--diamond);
    }
    
    .violet-theme .form-input:focus {
      box-shadow: 0 0 15px var(--neon-violet);
      border-color: var(--neon-violet);
    }
    
    .recharge-submit {
      padding: 12px;
      background: var(--diamond-gradient);
      border: none;
      border-radius: 8px;
      color: var(--black);
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }
    
    .violet-theme .recharge-submit {
      background: linear-gradient(135deg, #ba68c8, #e040fb);
    }
    
    .recharge-submit:hover {
      transform: scale(1.03);
      box-shadow: 0 0 15px var(--diamond);
    }
    
    .violet-theme .recharge-submit:hover {
      box-shadow: 0 0 15px var(--neon-violet);
    }
    
    .recharge-info {
      margin-top: 20px;
      padding: 15px;
      background: rgba(185, 242, 255, 0.1);
      border-radius: 8px;
      border: 1px solid var(--diamond);
      font-size: 0.9rem;
      color: var(--light-blue);
      line-height: 1.6;
    }
    
    .violet-theme .recharge-info {
      background: rgba(123, 31, 162, 0.1);
      border: 1px solid var(--neon-violet);
      color: var(--light-violet);
    }
    
    /* 分页样式 */
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 30px;
      gap: 10px;
    }
    
    .page-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid var(--medium-blue);
      color: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .violet-theme .page-btn {
      border: 1px solid var(--medium-violet);
    }
    
    .page-btn:hover, .page-btn.active {
      background: var(--neon-blue);
      box-shadow: 0 0 10px var(--neon-blue);
    }
    
    .violet-theme .page-btn:hover, 
    .violet-theme .page-btn.active {
      background: var(--neon-violet);
      box-shadow: 0 0 10px var(--neon-violet);
    }
    
    .page-btn.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* 充值结果弹窗 */
    .recharge-result {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(10, 25, 41, 0.95);
      border: 2px solid var(--neon-blue);
      border-radius: 15px;
      padding: 30px;
      z-index: 4000;
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: 0 0 30px rgba(0, 176, 255, 0.5);
      display: none;
    }
    
    .violet-theme .recharge-result {
      background: rgba(18, 7, 31, 0.95);
      border: 2px solid var(--neon-violet);
      box-shadow: 0 0 30px rgba(224, 64, 251, 0.5);
    }
    
    .recharge-result.success {
      border-color: var(--success);
      box-shadow: 0 0 30px rgba(76, 175, 80, 0.5);
    }
    
    .recharge-result.error {
      border-color: var(--danger);
      box-shadow: 0 0 30px rgba(244, 67, 54, 0.5);
    }
    
    .result-icon {
      font-size: 3.5rem;
      margin-bottom: 20px;
    }
    
    .result-icon.success {
      color: var(--success);
    }
    
    .result-icon.error {
      color: var(--danger);
    }
    
    .result-title {
      font-size: 1.8rem;
      margin-bottom: 15px;
    }
    
    .result-message {
      font-size: 1.1rem;
      margin-bottom: 25px;
      line-height: 1.6;
    }
    
    .result-close {
      padding: 10px 25px;
      background: var(--neon-blue);
      border: none;
      border-radius: 8px;
      color: var(--black);
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .violet-theme .result-close {
      background: var(--neon-violet);
    }
    
    .result-close:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px var(--neon-blue);
    }
    
    .violet-theme .result-close:hover {
      box-shadow: 0 0 15px var(--neon-violet);
    }
    
/* 神秘商店充值大卡片 - 精准居中版 */
.tshb-recharge-prompt {
    position: fixed;
    top: 50%;
    left: 50%;
    /* 先平移居中，再叠加缩放动画，避免居中偏移 */
    transform: translate(-50%, -50%) scale(0.9);
    width: 90%;
    max-width: 600px;
    background: var(--card-bg); /* 若文字仍受背景影响，可将此处改为固定不透明颜色，如 #551A8B */
    border: 1px solid var(--medium-violet);
    border-radius: 15px;
    box-shadow: 0 10px 40px rgba(123, 31, 162, 0.4);
    z-index: 1001;
    overflow: hidden;
    opacity: 0;
    transition: all 0.3s ease;
    margin: 0;
    padding: 0;
}

/* 显示状态保持居中 */
.tshb-recharge-prompt.show {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
}

/* 卡片头部 */
.recharge-card-header {
    background: var(--tshb-gradient);
    padding: 20px;
    position: relative;
}

/* 卡片标题 */
.recharge-card-title {
    color: white;
    font-size: 1.6rem;
    margin: 0;
    text-align: center;
    font-weight: bold;
}

/* 关闭按钮 */
.recharge-card-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: transparent;
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.recharge-card-close:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* 卡片内容区 */
.recharge-card-body {
    padding: 30px 25px;
    display: flex;
    flex-direction: column;
    gap: 25px;
}

/* 描述文本 */
.recharge-card-desc {
    color: var(--light-violet);
    line-height: 1.6;
    margin: 0;
    text-align: center;
    font-size: 1rem;
}

/* 充值按钮 - 与页面其他按钮风格统一 */
.recharge-card-btn {
    background: var(--medium-violet);
    color: white;
    border: none;
    border-radius: 30px;
    padding: 12px 0;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-top: 10px;
}

.recharge-card-btn:hover {
    background: var(--neon-violet);
    box-shadow: 0 0 15px var(--neon-violet);
    transform: translateY(-3px);
}

/* 遮罩层 - 只影响背景不影响卡片内容 */
.tshb-recharge-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5); /* 遮罩半透明不影响卡片内部 */
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.tshb-recharge-overlay.show {
  opacity: 1;
  visibility: visible;
}

/* 卡片容器 - 完全不透明 */
.tshb-recharge-prompt {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  width: 90%;
  max-width: 600px;
  background: #2c1a4d; /* 实色背景，不透明 */
  border: 1px solid #e040fb;
  border-radius: 15px;
  box-shadow: 0 10px 40px rgba(123, 31, 162, 0.6);
  z-index: 1001; /* 确保在遮罩层上方 */
  overflow: hidden;
  opacity: 0;
  transition: all 0.3s ease;
  margin: 0;
  padding: 0;
}

.tshb-recharge-prompt.show {
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
}

/* 卡片头部 - 实色背景 */
.recharge-card-header {
  background: linear-gradient(135deg, #7b1f9e, #e040fb); /* 不透明渐变 */
  padding: 20px;
  position: relative;
}

/* 卡片标题 - 确保文字清晰 */
.recharge-card-title {
  color: #ffffff; /* 白色文字，与背景对比强烈 */
  font-size: 1.6rem;
  margin: 0;
  text-align: center;
  font-weight: bold;
  text-shadow: 0 0 3px rgba(0,0,0,0.3); /* 增加文字清晰度 */
}

/* 关闭按钮 */
.recharge-card-close {
  position: absolute;
  top: 15px;
  right: 15px;
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

/* 卡片内容区 - 实色背景 */
.recharge-card-body {
  padding: 30px 25px;
  display: flex;
  flex-direction: column;
  gap: 25px;
  background: #2c1a4d; /* 与卡片容器背景一致，完全不透明 */
}

/* 描述文本 - 高对比度 */
.recharge-card-desc {
  color: #f0e6ff; /* 浅紫色文字，与深色背景对比清晰 */
  line-height: 1.6;
  margin: 0;
  text-align: center;
  font-size: 1rem;
}

/* 充值按钮 - 不透明背景 */
.recharge-card-btn {
  background: #e040fb; /* 实色按钮 */
  color: white;
  border: none;
  border-radius: 30px;
  padding: 12px 0;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 10px;
}

.recharge-card-btn:hover {
  background: #c028e0;
  box-shadow: 0 0 15px rgba(224, 64, 251, 0.8);
  transform: translateY(-3px);
}
    
    /* 搜索框修复 */
    .search-container {
      position: relative;
      z-index: 10; /* 确保搜索框在顶层 */
    }
    
    .search-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      z-index: 11; /* 确保按钮在搜索框上方 */
    }
    
    /* 兑换弹窗样式 */
    .exchange-modal {
      width: 90%;
      max-width: 500px;
      background: rgba(10, 25, 41, 0.95);
      border-radius: 15px;
      overflow: hidden;
      border: 1px solid var(--diamond);
      box-shadow: 0 0 30px rgba(185, 242, 255, 0.5);
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .violet-theme .exchange-modal {
      background: rgba(18, 7, 31, 0.95);
      border: 1px solid var(--neon-violet);
      box-shadow: 0 0 30px rgba(224, 64, 251, 0.5);
    }
    
    .exchange-header {
      padding: 16px 20px;
      background: rgba(185, 242, 255, 0.2);
      border-bottom: 1px solid var(--diamond);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .violet-theme .exchange-header {
      background: rgba(123, 31, 162, 0.2);
      border-bottom: 1px solid var(--neon-violet);
    }
    
    .exchange-title {
      font-size: 1.6rem;
      font-weight: bold;
      color: var(--white);
      text-shadow: 0 0 8px var(--diamond);
    }
    
    .violet-theme .exchange-title {
      text-shadow: 0 0 8px var(--neon-violet);
    }
    
    .exchange-content {
      padding: 25px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .exchange-rate {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin: 15px 0;
    }
    
    .currency-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.1);
      min-width: 120px;
    }
    
    .currency-icon {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .gold-icon-box .currency-icon {
      color: var(--gold);
    }
    
    .tshb-icon-box .currency-icon {
      color: var(--tshb-secondary);
    }
    
    .exchange-arrow {
      font-size: 2rem;
      color: var(--neon-blue);
    }
    
    .violet-theme .exchange-arrow {
      color: var(--neon-violet);
    }
    
    .exchange-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .exchange-result {
      text-align: center;
      font-size: 1.1rem;
      padding: 15px;
      background: rgba(185, 242, 255, 0.1);
      border-radius: 8px;
      border: 1px solid var(--diamond);
      display: none;
    }
    
    .violet-theme .exchange-result {
      background: rgba(123, 31, 162, 0.1);
      border: 1px solid var(--neon-violet);
    }
    
    .exchange-info {
      margin-top: 15px;
      padding: 15px;
      background: rgba(185, 242, 255, 0.1);
      border-radius: 8px;
      border: 1px solid var(--diamond);
      font-size: 0.9rem;
      color: var(--light-blue);
      line-height: 1.6;
    }
    
    .violet-theme .exchange-info {
      background: rgba(123, 31, 162, 0.1);
      border: 1px solid var(--neon-violet);
      color: var(--light-violet);
    }
    
    /* 兑换按钮 */
    .exchange-btn {
      background: var(--gold);
      color: var(--black);
      border: none;
      border-radius: 30px;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }
    
    .exchange-btn:hover {
      background: #ffcc00;
      box-shadow: 0 0 15px var(--gold);
    }
    
    /* 新增兑换按钮 */
    .exchange-nav-btn {
      background: transparent;
      color: var(--white);
      border: 1px solid var(--gold);
      padding: 8px 20px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .exchange-nav-btn:hover {
      background: rgba(255, 215, 0, 0.1);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
    }
  </style>
</head>
<body id="v1">
  <div class="background-effects" id="background">
   <div class="geometric-shape" style="top: 79.103%; left: 31.0222%; width: 199.833px; height: 185.063px; animation-duration: 19.4335s;"></div>
   <div class="geometric-shape" style="top: 8.0845%; left: 0.517123%; width: 50.3492px; height: 170.96px; animation-duration: 26.4101s;"></div>
   <div class="geometric-shape" style="top: 47.4076%; left: 36.016%; width: 167.04px; height: 175.95px; animation-duration: 12.5681s;"></div>
   <div class="geometric-shape" style="top: 57.7205%; left: 33.184%; width: 186.632px; height: 50.7384px; animation-duration: 19.9619s;"></div>
   <div class="geometric-shape" style="top: 63.2942%; left: 32.328%; width: 66.0864px; height: 51.4757px; animation-duration: 27.751s;"></div>
   <div class="geometric-shape" style="border-radius: 50%; top: 75.3772%; left: 53.0049%; width: 52.3517px; height: 173.162px; animation-duration: 13.8063s;"></div>
   <div class="geometric-shape" style="border-radius: 50%; top: 9.1042%; left: 43.4799%; width: 120.083px; height: 177.043px; animation-duration: 11.1678s;"></div>
   <div class="geometric-shape" style="top: 85.407%; left: 0.408945%; width: 75.3934px; height: 54.6225px; animation-duration: 23.0969s;"></div>
   <div class="geometric-shape" style="border-radius: 50%; top: 7.59184%; left: 58.4019%; width: 90.2987px; height: 182.458px; animation-duration: 10.161s;"></div>
   <div class="geometric-shape" style="top: 33.3453%; left: 26.4224%; width: 168.429px; height: 89.1317px; animation-duration: 25.8367s;"></div>
   <div class="geometric-shape" style="transform: rotate(45deg); top: 3.82579%; left: 56.4976%; width: 95.4549px; height: 66.9573px; animation-duration: 22.6257s;"></div>
   <div class="geometric-shape" style="border-radius: 50%; top: 84.5912%; left: 52.8637%; width: 105.75px; height: 50.7931px; animation-duration: 14.7578s;"></div>
   <div class="geometric-shape" style="transform: rotate(45deg); top: 79.8343%; left: 59.318%; width: 70.1269px; height: 189.884px; animation-duration: 25.3803s;"></div>
   <div class="geometric-shape" style="transform: rotate(45deg); top: 20.4098%; left: 45.4865%; width: 125.847px; height: 51.4359px; animation-duration: 29.9682s;"></div>
   <div class="geometric-shape" style="transform: rotate(45deg); top: 30.3237%; left: 89.8714%; width: 181.802px; height: 183.031px; animation-duration: 28.509s;"></div>
   <div class="light-spot" style="top: 20.1821%; left: 67.0534%; width: 9.68447px; height: 9.68447px; animation-delay: 2.35412s;"></div>
   <div class="light-spot" style="top: 96.4046%; left: 93.5023%; width: 12.2908px; height: 12.2908px; animation-delay: 0.750976s;"></div>
   <div class="light-spot" style="top: 90.7048%; left: 55.5315%; width: 11.255px; height: 11.255px; animation-delay: 2.5478s;"></div>
   <div class="light-spot" style="top: 26.4744%; left: 32.0533%; width: 10.1216px; height: 10.1216px; animation-delay: 0.878934s;"></div>
   <div class="light-spot" style="top: 14.844%; left: 6.26684%; width: 11.6699px; height: 11.6699px; animation-delay: 3.10369s;"></div>
   <div class="light-spot" style="top: 80.2029%; left: 50.9862%; width: 8.65437px; height: 8.65437px; animation-delay: 3.26683s;"></div>
   <div class="light-spot" style="top: 60.5521%; left: 49.0707%; width: 6.91416px; height: 6.91416px; animation-delay: 1.92164s;"></div>
   <div class="light-spot" style="top: 96.6167%; left: 47.7011%; width: 13.0964px; height: 13.0964px; animation-delay: 0.826257s;"></div>
   <div class="light-spot" style="top: 60.1829%; left: 92.3965%; width: 5.41388px; height: 5.41388px; animation-delay: 0.499516s;"></div>
   <div class="light-spot" style="top: 74.3153%; left: 21.1851%; width: 5.39496px; height: 5.39496px; animation-delay: 2.5703s;"></div>
   <div class="light-spot" style="top: 23.0286%; left: 55.7243%; width: 14.1464px; height: 14.1464px; animation-delay: 3.60395s;"></div>
   <div class="light-spot" style="top: 88.4373%; left: 46.5618%; width: 13.4024px; height: 13.4024px; animation-delay: 2.01353s;"></div>
   <div class="light-spot" style="top: 2.47871%; left: 61.6364%; width: 6.46843px; height: 6.46843px; animation-delay: 0.290689s;"></div>
   <div class="light-spot" style="top: 99.997%; left: 92.9764%; width: 10.2958px; height: 10.2958px; animation-delay: 3.60477s;"></div>
   <div class="light-spot" style="top: 65.914%; left: 85.8698%; width: 11.1665px; height: 11.1665px; animation-delay: 2.50432s;"></div>
   <div class="light-spot" style="top: 21.8966%; left: 39.9042%; width: 14.9206px; height: 14.9206px; animation-delay: 1.09817s;"></div>
   <div class="light-spot" style="top: 10.3792%; left: 17.4782%; width: 8.33513px; height: 8.33513px; animation-delay: 0.166602s;"></div>
   <div class="light-spot" style="top: 50.9093%; left: 23.4227%; width: 5.25735px; height: 5.25735px; animation-delay: 2.58813s;"></div>
   <div class="light-spot" style="top: 11.8316%; left: 65%; width: 9.60749px; height: 9.60749px; animation-delay: 2.06217s;"></div>
   <div class="light-spot" style="top: 67.289%; left: 25.5196%; width: 9.68618px; height: 9.68618px; animation-delay: 0.184949s;"></div>
   <div class="neon-pulse" style="top: 71.4849%; left: 33.0092%; animation-delay: 4.83239s;"></div>
   <div class="neon-pulse" style="top: 53.3429%; left: 90.0141%; animation-delay: 5.20423s;"></div>
   <div class="neon-pulse" style="top: 69.3927%; left: 59.0317%; animation-delay: 2.7929s;"></div>
  </div> 
 <!-- 神秘商店充值卡片遮罩层 -->
<div class="tshb-recharge-overlay" id="tshbOverlay"></div>

<!-- 神秘商店充值卡片 -->
<div class="tshb-recharge-prompt" id="tshbRechargePrompt">
  <div class="recharge-card-header">
    <h3 class="recharge-card-title">神秘商店充值页面</h3>
    <button class="recharge-card-close" id="closeTshbCard">×</button>
  </div>
  <div class="recharge-card-body">
    <p class="recharge-card-desc">
      解锁专属道具和特权，支持多种充值方式，安全便捷。<br>
      充值后可用于购买神秘商店内的稀有物品。
    </p>
    <button class="recharge-card-btn" id="goToRechargeBtn">
      <i class="fas fa-coins"></i>
      <span>前往充值中心</span>
    </button>
  </div>
</div>


  <!-- 通知提示 --> 
  <div class="notification" id="notification"> 
   <i id="v2" class="fas fa-check-circle"></i> 
   <span id="v3">操作成功！</span> 
  </div> 
  <!-- 充值结果弹窗 --> 
  <div class="recharge-result" id="rechargeResult"> 
   <div class="result-icon" id="resultIcon"></div> 
   <h2 class="result-title" id="resultTitle">充值结果</h2> 
   <p class="result-message" id="resultMessage"></p> 
   <button class="result-close" id="resultClose">确定</button> 
  </div> 
  <!-- 商品详情弹窗 --> 
  <div class="modal-overlay" id="productModal"> 
   <div id="v4" class="product-modal"> 
    <div id="v5" class="modal-header"> 
     <h2 class="modal-title" id="modalTitle">商品详情</h2> 
     <button class="close-modal" id="closeModal"> <i id="v6" class="fas fa-times"></i> </button> 
    </div> 
    <div id="v7" class="modal-content"> 
     <div id="v8" class="modal-image-container"> 
      <img src="" alt="商品大图预览" class="modal-image" id="modalImage"> 
     </div> 
     <div id="v9" class="modal-details"> 
      <div id="v10" class="modal-section"> 
       <h3 id="v11" class="section-heading"> <i id="v12" class="fas fa-align-left"></i> <span id="v13">商品描述</span> </h3> 
       <p class="product-desc-modal" id="modalDesc"></p> 
      </div> 
      <div id="v14" class="download-options"> 
       <h3 id="v15" class="download-title">选择下载方式</h3> 
       <div class="download-buttons" id="downloadButtons"></div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <!-- 充值弹窗 --> 
  <div class="modal-overlay" id="rechargeModal"> 
   <div id="v16" class="recharge-modal"> 
    <div id="v17" class="recharge-header"> 
     <h2 id="v18" class="recharge-title">充值中心</h2> 
     <button class="close-modal" id="closeRechargeModal"> <i id="v19" class="fas fa-times"></i> </button> 
    </div> 
    <div id="v20" class="recharge-content"> 
     <div class="recharge-options" id="rechargeOptions"> 
      <div id="v21" class="recharge-option diamond-option" data-type="diamond" data-amount="40" data-price="29.90"> 
       <div id="v22" class="recharge-icon"> 
        <i id="v23" class="fas fa-gem"></i> 
       </div> 
       <div id="v24" class="recharge-amount">
         40 钻石 
       </div> 
       <div id="v25" class="recharge-price">
         ¥29.90 
       </div> 
      </div> 
      <div id="v26" class="recharge-option diamond-option" data-type="diamond" data-amount="80" data-price="59.90"> 
       <div id="v27" class="recharge-icon"> 
        <i id="v28" class="fas fa-gem"></i> 
       </div> 
       <div id="v29" class="recharge-amount">
         80 钻石 
       </div> 
       <div id="v30" class="recharge-price">
         ¥59.90 
       </div> 
      </div> 
      <div id="v31" class="recharge-option gold-option" data-type="gold" data-amount="15" data-price="5.00"> 
       <div id="v32" class="recharge-icon"> 
        <i id="v33" class="fas fa-coins"></i> 
       </div> 
       <div id="v34" class="recharge-amount">
         15 金币 
       </div> 
       <div id="v35" class="recharge-price">
         ¥5.00 
       </div> 
      </div> 
      <div id="v36" class="recharge-option gold-option" data-type="gold" data-amount="30" data-price="10.00"> 
       <div id="v37" class="recharge-icon"> 
        <i id="v38" class="fas fa-coins"></i> 
       </div> 
       <div id="v39" class="recharge-amount">
         30 金币 
       </div> 
       <div id="v40" class="recharge-price">
         ¥10.00 
       </div> 
      </div> 
     <!-- TSHB充值选项 --> 
<div id="tshb1" class="recharge-option tshb-option" data-type="tshb" data-amount="10" data-price="1.00"> 
  <div id="v93" class="recharge-icon"> 
    <!-- 替换为图片引用 -->
    <img src="tshb.png" alt="TSHB图标" class="tshb-icon"> 
  </div> 
  <div id="v95" class="recharge-amount">
    10 灵蜕
  </div> 
  <div id="v96" class="recharge-price">
    ¥1.00
  </div> 
</div> 
<div id="tshb2" class="recharge-option tshb-option" data-type="tshb" data-amount="50" data-price="5.00"> 
  <div id="v97" class="recharge-icon"> 
    <!-- 替换为图片引用 -->
    <img src="tshb.png" alt="TSHB图标" class="tshb-icon"> 
  </div> 
  <div id="v99" class="recharge-amount">
    50 灵蜕
  </div> 
  <div id="v100" class="recharge-price">
    ¥5.00 
  </div> 
</div> 
<div id="tshb3" class="recharge-option tshb-option" data-type="tshb" data-amount="100" data-price="10.00"> 
  <div id="v97" class="recharge-icon"> 
    <!-- 替换为图片引用 -->
    <img src="tshb.png" alt="TSHB图标" class="tshb-icon"> 
  </div> 
  <div id="v99" class="recharge-amount">
    100 灵蜕
  </div> 
  <div id="v100" class="recharge-price">
    ¥10.00 
  </div> 
</div> 
<div id="tshb3" class="recharge-option tshb-option" data-type="tshb" data-amount="150" data-price="15.00"> 
  <div id="v97" class="recharge-icon"> 
    <!-- 替换为图片引用 -->
    <img src="tshb.png" alt="TSHB图标" class="tshb-icon"> 
  </div> 
  <div id="v99" class="recharge-amount">
    150 灵蜕
  </div> 
  <div id="v100" class="recharge-price">
    ¥15.00 
  </div> 
</div> 
</div>

     <form class="recharge-form" id="rechargeForm"> 
      <div id="v41" class="form-group"> 
       <label id="v42" class="form-label">订单号</label> 
       <input type="text" class="form-input" id="rechargeCode" placeholder="输入您的订单号" required=""> 
      </div> 
      <button type="submit" class="recharge-submit" id="rechargeSubmit"> <i id="v43" class="fas fa-bolt"></i> 确认充值 </button> 
     </form> 
     <div id="v44" class="recharge-info"> 
      <p id="v45"><i id="v46" class="fas fa-info-circle"></i> 请前往公众号支付获取订单号</p> 
      <p id="v47"><i id="v48" class="fas fa-lightbulb"></i> 充值之后返回该页面选择充值档位并且输入订单号</p> 
      <p id="v49"><i id="v50" class="fas fa-exclamation-triangle"></i> 每个订单号仅限使用一次后续需要再次充值</p> 
      <p id="v51"><i id="v52" class="fas fa-external-link-alt"></i> <a href="https://mp.weixin.qq.com/s/uZ_dqFI-hHN08e9NAokCYg" id="wechatLink">点此前往公众号充值</a></p> 
     </div> 
    </div> 
   </div> 
  </div> 
  
  <!-- 顶部区域 -->
  <header class="header">
    <!-- 标题 -->
    <div class="logo-container">
      <div class="logo">
        TUBAO STORE 
      </div>
    </div>
    
    <!-- 货币展示区 -->
    <div class="currency-container">
      <div class="currency-display">
        <!-- 金币 -->
        <div class="currency-item">
          <i class="fas fa-coins gold-icon"></i>
          <span class="currency-amount gold-amount" id="goldAmount">25</span>
          <span>金币</span>
        </div>
        <!-- 钻石 -->
        <div class="currency-item">
          <i class="fas fa-gem diamond-icon"></i>
          <span class="currency-amount diamond-amount" id="diamondAmount">0</span>
          <span>钻石</span>
        </div>
        <!-- TSHB -->
        <div class="currency-item">
          <img class="tshb-icon" src="tshb.png" alt="灵蜕图标">
          <span class="currency-amount tshb-amount" id="tshbAmount">0</span>
          <span>灵蜕</span>
        </div>
      </div>
    </div>
    
    <!-- 按钮区域 - 新增兑换按钮 -->
    <div class="nav-buttons">
      <button class="signin-btn" id="signinBtn">
        <i class="fas fa-calendar-check"></i> 签到
      </button>
      <button class="exchange-nav-btn" id="exchangeBtn">
        <i class="fas fa-exchange-alt"></i> 兑换
      </button>
      <button class="redeem-btn" id="rechargeBtn">
        <i class="fas fa-coins"></i> 充值
      </button>
      <button class="theme-toggle" id="themeToggle">
        <img src="snake.png" alt="神秘商店" style="width: 30px; height: 30px; object-fit: contain;">
        神秘商店
      </button>
      
      <!-- 搜索框 -->
      <div class="search-container">
        <input type="text" class="search-bar" id="searchInput" placeholder="搜索图包标题或描述...">
        <button class="search-btn" id="searchBtn">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
  </header>
  
  <!-- 新增兑换弹窗 -->
  <div class="modal-overlay" id="exchangeModal">
    <div class="exchange-modal">
      <div class="exchange-header">
        <h2 class="exchange-title">货币兑换中心</h2>
        <button class="close-modal" id="closeExchangeModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="exchange-content">
        <div class="exchange-rate">
          <div class="currency-box gold-icon-box">
            <i class="fas fa-coins currency-icon"></i>
            <div class="currency-name">金币</div>
          </div>
          <div class="exchange-arrow">
            <i class="fas fa-exchange-alt"></i>
          </div>
          <div class="currency-box tshb-icon-box">
            <img src="tshb.png" alt="TSHB图标" class="tshb-icon">
            <div class="currency-name">灵蜕</div>
          </div>
        </div>
        
        <div class="exchange-info">
          <p><i class="fas fa-info-circle"></i> 兑换比例: 1.5金币 = 1灵蜕</p>
          <p><i class="fas fa-exclamation-circle"></i> 每次兑换需为1.5金币的整数倍</p>
          <p><i class="fas fa-coins"></i> 当前金币: <span id="currentGold">25</span></p>
        </div>
        
        <form class="exchange-form" id="exchangeForm">
          <div class="form-group">
            <label class="form-label">兑换金币数量</label>
            <input type="number" class="form-input" id="exchangeGold" placeholder="输入金币数量" min="3" step="3" required>
            <p class="exchange-hint">最小兑换量: 3金币 (2灵蜕)</p>
          </div>
          
          <div class="exchange-result" id="exchangeResult">
            <i class="fas fa-check-circle"></i>
            <span>兑换成功！获得 <span id="exchangedTshb">0</span> 灵蜕</span>
          </div>
          
          <button type="submit" class="exchange-btn" id="exchangeSubmit">
            <i class="fas fa-exchange-alt"></i> 确认兑换
          </button>
        </form>
      </div>
    </div>
  </div>
  <!-- 首页内容 --> 
  <div class="page-container active" id="homePage"> 
   <div id="v71" class="main-content"> 
    <h2 id="v72" class="section-title">精选图包下载</h2> 
    <div id="v73" class="categories"> 
     <button id="v74" class="category-btn active" data-category="all"> <i id="v75" class="fas fa-star"></i> 全部图包 </button> 
     <button id="v76" class="category-btn" data-category="june"> <i id="v77" class="fas fa-sun"></i> 6月图包 </button> 
     <button id="v78" class="category-btn" data-category="july"> <i id="v79" class="fas fa-fire"></i> 7月图包 </button> 
     <button id="v80" class="category-btn" data-category="premium"> <i id="v81" class="fas fa-fire"></i> 往期图包 </button> 
    </div> 
    <section class="products" id="productsContainer">
     <div class="product-card" data-category="june" data-name="6月图包" data-desc="🔥本次更新图包，包含澜-花海、孙策-奇旅、亚连-落雪白狼、马可波罗-妄想实况 ！"> 
      <div class="product-image"> 
       <img src="https://s21.ax1x.com/2025/07/05/pVKs1IO.jpg" alt="6月图包"> 
       <div class="gold-lock-overlay"> 
        <i class="fas fa-lock"></i> 
       </div> 
       <span class="product-tag">付费商品</span> 
       <div class="product-price diamond-price"> 
        <i class="fas fa-gem"></i> 40 钻石 
       </div> 
      </div> 
      <div class="product-content"> 
       <h3 class="product-name">6月图包</h3> 
       <p class="product-desc">🔥本次更新图包，包含澜-花海、孙策-奇旅、亚连-落雪白狼、马可波罗-妄想实况 ！</p> 
       <button class="download-btn diamond-locked" data-id="1"> <i class="fas fa-lock"></i> 购买解锁 (40钻石) </button> 
      </div> 
     </div>
     <div class="product-card" data-category="july" data-name="7月图包" data-desc="🔥本次更新图包，黑崎一护、赵云 - 乘龙·铭钟鼎、裴擒虎 - 祥瑞亨通、澜 - 年限、勘探员 - 盛夏飞盘 ！"> 
      <div class="product-image"> 
       <img src="https://s21.ax1x.com/2025/07/05/pVKrIxA.jpg" alt="7月图包"> 
       <div class="gold-lock-overlay"> 
        <i class="fas fa-lock"></i> 
       </div> 
       <span class="product-tag">付费商品</span> 
       <div class="product-price diamond-price"> 
        <i class="fas fa-gem"></i> 50 钻石 
       </div> 
      </div> 
      <div class="product-content"> 
       <h3 class="product-name">7月图包</h3> 
       <p class="product-desc">🔥本次更新图包，黑崎一护、赵云 - 乘龙·铭钟鼎、裴擒虎 - 祥瑞亨通、澜 - 年限、勘探员 - 盛夏飞盘 ！</p> 
       <button class="download-btn diamond-locked" data-id="2"> <i class="fas fa-lock"></i> 购买解锁 (50钻石) </button> 
      </div> 
     </div>
     <div class="product-card" data-category="premium" data-name="往期混合图包" data-desc="签到15天即可免费获得包体大小3.20GB的随机角色图包"> 
      <div class="product-image"> 
       <img src="https://s21.ax1x.com/2025/07/07/pVMsFAK.jpg" alt="往期混合图包"> 
       <div class="gold-lock-overlay"> 
        <i class="fas fa-lock"></i> 
       </div> 
       <span class="product-tag">可累积签到获得</span> 
       <div class="product-price gold-price"> 
        <i class="fas fa-coins"></i> 100 金币 
       </div> 
      </div> 
      <div class="product-content"> 
       <h3 class="product-name">往期混合图包</h3> 
       <p class="product-desc">签到15天即可免费获得包体大小3.20GB的随机角色图包</p> 
       <button class="download-btn locked" data-id="3"> <i class="fas fa-lock"></i> 购买解锁 (30金币) </button> 
      </div> 
     </div>
     <div class="product-card" data-category="premium" data-name="往期图包" data-desc="可提前购买解锁，后续会补充内容"> 
      <div class="product-image"> 
       <img src="https://s21.ax1x.com/2025/07/07/pVMrLkT.jpg" alt="往期图包"> 
       <div class="gold-lock-overlay"> 
        <i class="fas fa-lock"></i> 
       </div> 
       <span class="product-tag">可累积签到获得</span> 
       <div class="product-price gold-price"> 
        <i class="fas fa-coins"></i> 100 金币 
       </div> 
      </div> 
      <div class="product-content"> 
       <h3 class="product-name">往期图包</h3> 
       <p class="product-desc">可提前购买解锁，后续会补充内容</p> 
       <button class="download-btn locked" data-id="4"> <i class="fas fa-lock"></i> 购买解锁 (30金币) </button> 
      </div> 
     </div>
     <div class="product-card" data-category="premium" data-name="往期图包" data-desc="可提前购买解锁，后续会补充内容"> 
      <div class="product-image"> 
       <img src="https://s21.ax1x.com/2025/07/07/pVMrLkT.jpg" alt="往期图包"> 
       <div class="gold-lock-overlay"> 
        <i class="fas fa-lock"></i> 
       </div> 
       <span class="product-tag">可累积签到获得</span> 
       <div class="product-price tshb-price"> 
        <div class="tshb-icon"></div> 20 TSHB 
       </div> 
      </div> 
      <div class="product-content"> 
       <h3 class="product-name">往期图包</h3> 
       <p class="product-desc">可提前购买解锁，后续会补充内容</p> 
       <button class="download-btn tshb-locked" data-id="5"> <i class="fas fa-lock"></i> 购买解锁 (20TSHB) </button> 
      </div> 
     </div>
    </section> 
    <!-- 分页控件 --> 
    <div class="pagination" id="pagination"> 
     <button id="v82" class="page-btn prev-btn disabled"> <i id="v83" class="fas fa-chevron-left"></i> </button> 
     <button id="v84" class="page-btn active" style="display: flex;">1</button> 
     <button id="v85" class="page-btn" style="display: none;">2</button> 
     <button id="v86" class="page-btn" style="display: none;">3</button> 
     <button id="v87" class="page-btn next-btn disabled"> <i id="v88" class="fas fa-chevron-right"></i> </button> 
    </div> 
   </div> 
  </div> 
  <footer id="v89" class="footer"> 
   <p id="v90">© 2025 图包商店【泷】 | 每月定期更新</p> 
  </footer> 
  <script>
    // 图包数据 - 月亮主题（蓝色）
    const moonAssets = [
      { 
        id: 1, 
        name: "6月图包", 
        category: "june", 
        desc: "🔥本次更新图包，包含澜-花海、孙策-奇旅、亚连-落雪白狼、马可波罗-妄想实况 ！",
        imageUrl: "https://s21.ax1x.com/2025/07/05/pVKs1IO.jpg",
        detailImageUrl: "https://s21.ax1x.com/2025/07/05/pVKs1IO.jpg",
        price: 40,
        currency: "diamond",
        downloadOptions: [
          {
            name: "夸克网盘",
            icon: "fab fa-telegram-plane",
            desc: "超大空间 | 会员加速",
            link: "https://pan.quark.cn/s/84e6b55ba10c?pwd=Cxr6"
          },
          {
            name: "蓝奏云",
            icon: "fas fa-cloud-download-alt",
            desc: "国内推荐 | 稳定快速",
            link: "https://link3.cc/silong0000"
          },
          {
            name: "小飞机网盘",
            icon: "fas fa-download",
            desc: "在线下载 | 无需登录",
            link: "https://share.feijipan.com/s/uPMS2VFm"
          }
        ]
      },
      { 
        id: 2, 
        name: "7月图包", 
        category: "july", 
        desc: "🔥本次更新图包，黑崎一护、赵云 - 乘龙·铭钟鼎、裴擒虎 - 祥瑞亨通、澜 - 年限、勘探员 - 盛夏飞盘 ！",
        imageUrl: "https://s21.ax1x.com/2025/07/05/pVKrIxA.jpg",
        detailImageUrl: "https://s21.ax1x.com/2025/07/05/pVKrIxA.jpg",
        price: 50,
        currency: "diamond",
        downloadOptions: [
          {
            name: "夸克网盘",
            icon: "fab fa-telegram-plane",
            desc: "超大空间 | 会员加速",
            link: "https://pan.quark.cn/s/0c463e6e24eb?pwd=iDiH"
          },
          {
            name: "蓝奏云",
            icon: "fas fa-cloud-download-alt",
            desc: "国内推荐 | 稳定快速",
            link: "https://link3.cc/july1"
          },
          {
            name: "小飞机网盘",
            icon: "fas fa-download",
            desc: "在线下载 | 无需登录",
            link: "https://share.feijipan.com/s/IuMLiynJ"
          }
        ]
      },
      { 
        id: 3, 
        name: "往期图包", 
        category: "premium", 
        desc: "签到20天即可免费获得澜-照愿-九州拓图包",
        imageUrl: "lan1.jpg",
        detailImageUrl: "lan1.jpg",
        price: 100,
        currency: "gold",
        downloadOptions: [
          {
            name: "夸克网盘",
            icon: "fab fa-telegram-plane",
            desc: "超大空间 | 会员加速",
            link: "https://share.feijipan.com/s/RarePack"
          },
          {
            name: "蓝奏云",
            icon: "fas fa-cloud-download-alt",
            desc: "国内推荐 | 稳定快速",
            link: "https://link3.cc/rare-pack"
          },
          {
            name: "小飞机网盘",
            icon: "fas fa-download",
            desc: "在线下载 | 无需登录",
            link: "https://share.feijipan.com/s/GdNZzG8v"
          }
        ]
      },
      { 
        id: 4, 
        name: "往期图包", 
        category: "premium", 
        desc: "签到20天即可免费获得赵云-乘龙-铭钟鼎图包",
        imageUrl: "zhaoyun1.jpg",
        detailImageUrl: "zhaoyun1.jpg",
        price: 100,
        currency: "gold",
        downloadOptions: [
          {
            name: "夸克网盘",
            icon: "fab fa-telegram-plane",
            desc: "超大空间 | 会员加速",
            link: "https://share.feijipan.com/s/EffectsPack"
          },
          {
            name: "蓝奏云",
            icon: "fas fa-cloud-download-alt",
            desc: "国内推荐 | 稳定快速",
            link: "https://link3.cc/effects-pack"
          },
          {
            name: "网页下载",
            icon: "fas fa-download",
            desc: "在线下载 | 无需登录",
            link: "https://share.feijipan.com/s/1RNZkejw"
          }
        ]
      },
      { 
        id: 5, 
        name: "往期图包", 
        category: "premium", 
        desc: "签到20天即可免费获得海诺-心动图包",
        imageUrl: "https://s21.ax1x.com/2025/07/07/pVMrLkT.jpg",
        detailImageUrl: "https://s21.ax1x.com/2025/07/07/pVMrLkT.jpg",
        price: 100,
        currency: "gold",
        downloadOptions: [
          {
            name: "夸克网盘",
            icon: "fab fa-telegram-plane",
            desc: "超大空间 | 会员加速",
            link: "https://pan.quark.cn/s/june2"
          },
          {
            name: "蓝奏云",
            icon: "fas fa-cloud-download-alt",
            desc: "国内推荐 | 稳定快速",
            link: "https://link3.cc/june2"
          },
          {
            name: "小飞机网盘",
            icon: "fas fa-download",
            desc: "在线下载 | 无需登录",
            link: "https://share.feijipan.com/s/F1NZktFL"
                }
        ]
      },
      { 
        id: 6, 
        name: "往期图包", 
        category: "premium", 
        desc: "签到20天即可免费获得海诺-心动图包",
        imageUrl: "https://s21.ax1x.com/2025/07/07/pVMrLkT.jpg",
        detailImageUrl: "https://s21.ax1x.com/2025/07/07/pVMrLkT.jpg",
        price: 100,
        currency: "gold",
        downloadOptions: [
          {
            name: "夸克网盘",
            icon: "fab fa-telegram-plane",
            desc: "超大空间 | 会员加速",
            link: "https://pan.quark.cn/s/june2"
          },
          {
            name: "蓝奏云",
            icon: "fas fa-cloud-download-alt",
            desc: "国内推荐 | 稳定快速",
            link: "https://link3.cc/june2"
          },
          {
            name: "小飞机网盘",
            icon: "fas fa-download",
            desc: "在线下载 | 无需登录",
            link: "https://share.feijipan.com/s/F1NZktFL"
                         }
        ]
      },
      { 
        id: 7, 
        name: "往期图包", 
        category: "premium", 
        desc: "签到20天即可免费获得海诺-心动图包",
        imageUrl: "https://s21.ax1x.com/2025/07/07/pVMrLkT.jpg",
        detailImageUrl: "https://s21.ax1x.com/2025/07/07/pVMrLkT.jpg",
        price: 100,
        currency: "gold",
        downloadOptions: [
          {
            name: "夸克网盘",
            icon: "fab fa-telegram-plane",
            desc: "超大空间 | 会员加速",
            link: "https://pan.quark.cn/s/june2"
          },
          {
            name: "蓝奏云",
            icon: "fas fa-cloud-download-alt",
            desc: "国内推荐 | 稳定快速",
            link: "https://link3.cc/june2"
          },
          {
            name: "小飞机网盘",
            icon: "fas fa-download",
            desc: "在线下载 | 无需登录",
            link: "https://share.feijipan.com/s/F1NZktFL"
          }
        ]
      }
    ];
    
    // 图包数据 - 紫罗兰主题
    const violetAssets = [
      { 
        id: 11, 
    name: "等待后续更新", 
    category: "premium", 
    desc: "神秘商品一",
    imageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    detailImageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    price: 10,
    currency: "tshb",
    downloadOptions: [
      {
        name: "夸克网盘",
        icon: "fab fa-telegram-plane",
        desc: "超大空间 | 会员加速",
        link: "#"
      },
      {
        name: "蓝奏云",
        icon: "fas fa-cloud-download-alt",
        desc: "国内推荐 | 稳定快速",
        link: "#"
      },
      {
        name: "网页下载",
        icon: "fas fa-download",
        desc: "在线下载 | 无需登录",
        link: "#"
      }
    ]
  },
  { 
    id: 12, 
    name: "等待后续更新", 
    category: "premium", 
    desc: "神秘商品二",
    imageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    detailImageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    price: 10,
    currency: "tshb",
    downloadOptions: [
      {
        name: "夸克网盘",
        icon: "fab fa-telegram-plane",
        desc: "超大空间 | 会员加速",
        link: "#"
      },
      {
        name: "蓝奏云",
        icon: "fas fa-cloud-download-alt",
        desc: "国内推荐 | 稳定快速",
        link: "#"
      },
      {
        name: "小飞机网盘",
        icon: "fas fa-download",
        desc: "在线下载 | 无需登录",
        link: "#"
      }
    ]
  },
  { 
    id: 13, 
    name: "等待后续更新", 
    category: "premium", 
    desc: "神秘商品三",
    imageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    detailImageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png", 
    price: 10,
    currency: "tshb",
    downloadOptions: [
      {
        name: "夸克网盘",
        icon: "fab fa-telegram-plane",
        desc: "超大空间 | 会员加速",
        link: "#"
      },
      {
        name: "蓝奏云",
        icon: "fas fa-cloud-download-alt",
        desc: "国内推荐 | 稳定快速",
        link: "#"
      },
      {
        name: "网页下载",
        icon: "fas fa-download",
        desc: "在线下载 | 无需登录",
        link: "#"
      }
    ]
  },
  { 
    id: 14, 
    name: "等待后续更新", 
    category: "premium", 
    desc: "神秘商品四",
    imageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    detailImageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    price: 10,
    currency: "tshb",
    downloadOptions: [
      {
        name: "夸克网盘",
        icon: "fab fa-telegram-plane",
        desc: "超大空间 | 会员加速",
        link: "#"
      },
      {
        name: "蓝奏云",
        icon: "fas fa-cloud-download-alt",
        desc: "国内推荐 | 稳定快速",
        link: "#"
      },
      {
        name: "网页下载",
        icon: "fas fa-download",
        desc: "在线下载 | 无需登录",
        link: "#"
      }
    ]
  },
  { 
    id: 15, 
    name: "等待后续更新", 
    category: "premium", 
    desc: "神秘商品五",
    imageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    detailImageUrl: "https://s21.ax1x.com/2024/06/13/pkHc6LQ.png",
    price: 10,
    currency: "tshb",
    downloadOptions: [ 
      {
        name: "夸克网盘",
        icon: "fab fa-telegram-plane",
        desc: "超大空间 | 会员加速",
        link: "#"
      },
      {
        name: "蓝奏云",
        icon: "fas fa-cloud-download-alt",
        desc: "国内推荐 | 稳定快速",
        link: "#"
      },
      {
        name: "网页下载",
        icon: "fas fa-download",
        desc: "在线下载 | 无需登录",
        link: "#"

          }
        ]
      }
    ];
    
// DOM元素
const modal = document.getElementById('productModal');
const closeModalBtn = document.getElementById('closeModal');
const modalTitle = document.getElementById('modalTitle');
const modalImage = document.getElementById('modalImage');
const modalDesc = document.getElementById('modalDesc');
const downloadButtonsContainer = document.getElementById('downloadButtons');
const goldAmount = document.getElementById('goldAmount');
const diamondAmount = document.getElementById('diamondAmount');
const tshbAmount = document.getElementById('tshbAmount');
const rechargeModal = document.getElementById('rechargeModal');
const closeRechargeModal = document.getElementById('closeRechargeModal');
const rechargeBtn = document.getElementById('rechargeBtn');
const signinBtn = document.getElementById('signinBtn');
const rechargeForm = document.getElementById('rechargeForm');
const rechargeOptions = document.getElementById('rechargeOptions');
const themeToggle = document.getElementById('themeToggle');
const productsContainer = document.getElementById('productsContainer');
const pagination = document.getElementById('pagination');
const prevBtn = document.querySelector('.prev-btn');
const nextBtn = document.querySelector('.next-btn');
const pageBtns = document.querySelectorAll('.page-btn:not(.prev-btn):not(.next-btn)');
const wechatLink = document.getElementById('wechatLink');
const rechargeResult = document.getElementById('rechargeResult');
const resultIcon = document.getElementById('resultIcon');
const resultTitle = document.getElementById('resultTitle');
const resultMessage = document.getElementById('resultMessage');
const resultClose = document.getElementById('resultClose');
const tshbRechargePrompt = document.getElementById('tshbRechargePrompt');
const exchangeBtn = document.getElementById('exchangeBtn');
const exchangeModal = document.getElementById('exchangeModal');
const closeExchangeModal = document.getElementById('closeExchangeModal');
const exchangeForm = document.getElementById('exchangeForm');
const exchangeResult = document.getElementById('exchangeResult');

// 用户状态
let userGold = 0;
let userDiamonds = 0;
let userTSHB = 10; // 初始灵蜕设为10
let unlockedProducts = [];
let usedRechargeCodes = [];
let isVioletTheme = false;
let isAuthorized = false;
let currentPage = 1;
const itemsPerPage = 5;
let currentAssets = moonAssets;
let selectedRechargeOption = null;
let tshbPromptTimeout = null;

// 数据版本控制
const storageVersion = 'v7'; // 更新版本号

// 初始化页面
document.addEventListener('DOMContentLoaded', function() {
  // 检查存储版本
  const storedVersion = localStorage.getItem('storageVersion');
  if (storedVersion !== storageVersion) {
    localStorage.clear();
    localStorage.setItem('storageVersion', storageVersion);
  }
  
  // 从本地存储加载数据
  userGold = parseInt(localStorage.getItem('userGold') || 0); // 初始金币为0
  userDiamonds = parseInt(localStorage.getItem('userDiamonds') || 0); // 初始钻石为0
  userTSHB = parseInt(localStorage.getItem('userTSHB') || 10); // 初始灵蜕为10
  unlockedProducts = JSON.parse(localStorage.getItem('unlockedProducts') || '[]');
  usedRechargeCodes = JSON.parse(localStorage.getItem('usedRechargeCodes') || '[]');
  isVioletTheme = localStorage.getItem('isVioletTheme') === 'true' || false;
  isAuthorized = localStorage.getItem('isAuthorized') === 'true' || false;
  
  // 检查授权用户
  checkAuthorization();
  
  // 初始化货币显示
  updateCurrencyDisplay();
  
  // 初始化主题
  if (isVioletTheme) {
    document.body.classList.add('violet-theme');
    currentAssets = violetAssets;
  } else {
    currentAssets = moonAssets;
  }
  
  // 创建背景几何图形和光斑
  createBackgroundEffects();
  
  // 初始化商品显示
  renderProducts();
  updatePagination();
  
  // 初始化事件监听
  initEventListeners();
  
  // 关闭弹窗按钮
  closeModalBtn.addEventListener('click', closeModal);
  closeRechargeModal.addEventListener('click', closeRecharge);
  closeExchangeModal.addEventListener('click', closeExchange);
  
  // 点击弹窗外部关闭
  modal.addEventListener('click', function(e) {
    if (e.target === modal) closeModal();
  });
  
  rechargeModal.addEventListener('click', function(e) {
    if (e.target === rechargeModal) closeRecharge();
  });
  
  exchangeModal.addEventListener('click', function(e) {
    if (e.target === exchangeModal) closeExchange();
  });
  
  // 充值按钮
  rechargeBtn.addEventListener('click', openRecharge);
  
  // 签到按钮
  signinBtn.addEventListener('click', signin);
  
  // 兑换按钮
  exchangeBtn.addEventListener('click', openExchange);
  
  // 充值表单
  rechargeForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const code = document.getElementById('rechargeCode').value.trim();
    rechargeWithCode(code);
  });
  
  // 兑换表单
  exchangeForm.addEventListener('submit', function(e) {
    e.preventDefault();
    exchangeGoldForTshb();
  });
  
  // 充值选项点击
  rechargeOptions.querySelectorAll('.recharge-option').forEach(option => {
    option.addEventListener('click', function() {
      if (this.classList.contains('disabled')) return;
      rechargeOptions.querySelectorAll('.recharge-option').forEach(opt => opt.classList.remove('selected'));
      this.classList.add('selected');
      selectedRechargeOption = {
        type: this.dataset.type,
        amount: parseInt(this.dataset.amount),
        price: parseFloat(this.dataset.price)
      };
    });
  });
  
  // 主题切换
  themeToggle.addEventListener('click', toggleTheme);
  
  // 分页按钮
  prevBtn.addEventListener('click', goToPrevPage);
  nextBtn.addEventListener('click', goToNextPage);
  
  // 页码按钮
  pageBtns.forEach((btn, index) => {
    btn.addEventListener('click', function() {
      if (!this.classList.contains('active')) goToPage(index + 1);
    });
  });
  
  // 公众号链接
  wechatLink.href = "https://mp.weixin.qq.com/s/uZ_dqFI-hHN08e9NAokCYg";
  wechatLink.addEventListener('click', function(e) {
    e.preventDefault();
    usedRechargeCodes = [];
    localStorage.setItem('usedRechargeCodes', JSON.stringify(usedRechargeCodes));
    showNotification("充值码记录已重置", "info");
    window.open(this.href, '_blank', 'noopener,noreferrer');
  });
  
  // 充值结果关闭
  resultClose.addEventListener('click', () => rechargeResult.style.display = 'none');
  
  // 神秘商店按钮事件
  const closeTshbCard = document.getElementById('closeTshbCard');
  const goToRechargeBtn = document.getElementById('goToRechargeBtn');
  
  if (closeTshbCard) {
    closeTshbCard.addEventListener('click', function(e) {
      e.stopPropagation();
      tshbRechargePrompt.classList.remove('show');
      if (tshbPromptTimeout) clearTimeout(tshbPromptTimeout);
    });
  }
  
  if (goToRechargeBtn) {
    goToRechargeBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      tshbRechargePrompt.classList.remove('show');
      if (tshbPromptTimeout) clearTimeout(tshbPromptTimeout);
      openRecharge();
    });
  }
});

// 检查用户授权状态
function checkAuthorization() {
  const userId = localStorage.getItem('userId');
  if (userId === "3213824126") {
    isAuthorized = true;
    localStorage.setItem('isAuthorized', 'true');
    
    // 解锁所有商品
    const allAssetIds = [...moonAssets, ...violetAssets].map(asset => asset.id);
    unlockedProducts = [...new Set([...unlockedProducts, ...allAssetIds])];
    localStorage.setItem('unlockedProducts', JSON.stringify(unlockedProducts));
    
    // 更新货币显示
    updateCurrencyDisplay();
    
    // 重新渲染商品
    renderProducts();
    
    showNotification("您已获得宝库会员权限！无限货币+所有商品解锁", "success");
  }
}

// 更新货币显示
function updateCurrencyDisplay() {
  if (isAuthorized) {
    goldAmount.textContent = "∞";
    diamondAmount.textContent = "∞";
    tshbAmount.textContent = "∞";
  } else {
    goldAmount.textContent = userGold;
    diamondAmount.textContent = userDiamonds;
    tshbAmount.textContent = userTSHB;
  }
  
  // 确保货币显示不会被主题切换遮挡
  const currencyDisplay = document.querySelector('.currency-display');
  if (currencyDisplay) {
    currencyDisplay.style.zIndex = '1000';
    currencyDisplay.style.position = 'relative';
  }
}

// 渲染商品
function renderProducts() {
  productsContainer.innerHTML = '';
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const currentProducts = currentAssets.slice(startIndex, endIndex);
  
  currentProducts.forEach(asset => {
    const isUnlocked = isAuthorized || unlockedProducts.includes(asset.id);
    const currencyIcon = asset.currency === 'gold' ? 'fas fa-coins' : 
                      asset.currency === 'diamond' ? 'fas fa-gem' : 'fas fa-star';
    const currencyName = asset.currency === 'gold' ? '金币' : 
                        asset.currency === 'diamond' ? '钻石' : '灵蜕';
    
    const productCard = document.createElement('div');
    productCard.className = 'product-card';
    productCard.dataset.category = asset.category;
    productCard.dataset.name = asset.name;
    productCard.dataset.desc = asset.desc;
    
    productCard.innerHTML = `
      <div class="product-image">
        <img src="${asset.imageUrl}" alt="${asset.name}">
        <div class="gold-lock-overlay" style="${isUnlocked ? 'display:none' : ''}">
          <i class="fas fa-lock"></i>
        </div>
        <span class="product-tag">${asset.category === 'june' || asset.category === 'july' ? '付费商品' : '可累积签到获得'}</span>
        <div class="product-price ${asset.currency === 'gold' ? 'gold-price' : 
          asset.currency === 'diamond' ? 'diamond-price' : 'tshb-price'}">
          ${asset.currency === 'tshb' ? '<div class="tshb-icon"></div>' : `<i class="${currencyIcon}"></i>`}
          ${asset.price} ${currencyName}
        </div>
      </div>
      <div class="product-content">
        <h3 class="product-name">${asset.name}</h3>
        <p class="product-desc">${asset.desc}</p>
        <button class="download-btn ${isUnlocked ? '' : 
          asset.currency === 'tshb' ? 'tshb-locked' : 
          asset.currency === 'diamond' ? 'diamond-locked' : 'locked'}" 
                data-id="${asset.id}">
          <i class="fas ${isUnlocked ? 'fa-download' : 'fa-lock'}"></i>
          ${isUnlocked ? '下载图包' : `购买解锁 (${asset.price}${currencyName})`}
        </button>
      </div>
    `;
    productsContainer.appendChild(productCard);
  });
  initDownloadButtons();
}

// 初始化下载按钮事件 - 修改了购买逻辑
function initDownloadButtons() {
  document.querySelectorAll('.download-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      this.classList.add('clicked');
      setTimeout(() => this.classList.remove('clicked'), 300);
      
      const assetId = parseInt(this.dataset.id);
      const asset = currentAssets.find(a => a.id === assetId);
      
      // 如果商品已解锁，直接显示详情
      if (isAuthorized || unlockedProducts.includes(assetId)) {
        showAssetDetails(assetId);
        return;
      }
      
      // 检查货币是否足够
      let canUnlock = false;
      if (asset.currency === "gold") {
        canUnlock = userGold >= asset.price;
      } else if (asset.currency === "diamond") {
        canUnlock = userDiamonds >= asset.price;
      } else if (asset.currency === "tshb") {
        canUnlock = userTSHB >= asset.price;
      }
      
      if (canUnlock) {
        // 扣除货币
        if (asset.currency === "gold") {
          userGold -= asset.price;
          localStorage.setItem('userGold', userGold);
        } else if (asset.currency === "diamond") {
          userDiamonds -= asset.price;
          localStorage.setItem('userDiamonds', userDiamonds);
        } else if (asset.currency === "tshb") {
          userTSHB -= asset.price;
          localStorage.setItem('userTSHB', userTSHB);
        }
        
        // 解锁商品
        unlockedProducts.push(assetId);
        localStorage.setItem('unlockedProducts', JSON.stringify(unlockedProducts));
        
        // 更新显示
        updateCurrencyDisplay();
        this.innerHTML = '<i class="fas fa-download"></i> 下载图包';
        this.classList.remove('locked', 'diamond-locked', 'tshb-locked');
        this.closest('.product-card').querySelector('.gold-lock-overlay').style.display = 'none';
        
        // 显示商品详情
        showAssetDetails(assetId);
        showNotification(`成功解锁商品！扣除${asset.price}${asset.currency === 'gold' ? '金币' : asset.currency === 'diamond' ? '钻石' : '灵蜕'}`, "success");
      } else {
        // 货币不足 - 修改：只弹出充值提示，不自动打开充值中心
        if (asset.currency === "tshb") {
          showTshbRechargePrompt();
        }
        showNotification(`${asset.currency === 'gold' ? '金币' : asset.currency === 'diamond' ? '钻石' : '灵蜕'}不足！需要${asset.price}`, "error");
      }
    });
  });
}

// 显示TSHB充值提示
function showTshbRechargePrompt() {
  if (tshbPromptTimeout) clearTimeout(tshbPromptTimeout);
  tshbRechargePrompt.classList.add('show');
  tshbPromptTimeout = setTimeout(() => tshbRechargePrompt.classList.remove('show'), 5000);
}

// 创建背景效果
function createBackgroundEffects() {
  const background = document.getElementById('background');
  if (!background) return;
  
  // 几何图形
  for (let i = 0; i < 15; i++) {
    const shape = document.createElement('div');
    shape.classList.add('geometric-shape');
    shape.style.top = `${Math.random() * 100}%`;
    shape.style.left = `${Math.random() * 100}%`;
    shape.style.width = `${50 + Math.random() * 150}px`;
    shape.style.height = `${50 + Math.random() * 150}px`;
    if (Math.random() > 0.66) shape.style.borderRadius = '50%';
    else if (Math.random() > 0.5) shape.style.transform = 'rotate(45deg)';
    shape.style.animationDuration = `${10 + Math.random() * 20}s`;
    background.appendChild(shape);
  }
  
  // 光斑
  for (let i = 0; i < 20; i++) {
    const light = document.createElement('div');
    light.classList.add('light-spot');
    light.style.top = `${Math.random() * 100}%`;
    light.style.left = `${Math.random() * 100}%`;
    light.style.width = `${5 + Math.random() * 10}px`;
    light.style.height = `${5 + Math.random() * 10}px`;
    light.style.animationDelay = `${Math.random() * 4}s`;
    background.appendChild(light);
  }
  
  // 脉冲效果
  for (let i = 0; i < 3; i++) {
    const pulse = document.createElement('div');
    pulse.classList.add('neon-pulse');
    pulse.style.top = `${Math.random() * 100}%`;
    pulse.style.left = `${Math.random() * 100}%`;
    pulse.style.animationDelay = `${Math.random() * 8}s`;
    background.appendChild(pulse);
  }
}

// 显示通知
function showNotification(message, type = "success") {
  const notification = document.getElementById('notification');
  if (!notification) return;
  
  notification.className = `notification ${type}`;
  const icons = {
    success: 'fa-check-circle',
    error: 'fa-exclamation-circle',
    warning: 'fa-exclamation-triangle',
    info: 'fa-info-circle'
  };
  notification.innerHTML = `<i class="fas ${icons[type]}"></i><span>${message}</span>`;
  notification.classList.add('show');
  setTimeout(() => notification.classList.remove('show'), 3000);
}

// 显示充值结果
function showRechargeResult(success, message) {
  resultIcon.className = `result-icon ${success ? 'success' : 'error'}`;
  resultIcon.innerHTML = `<i class="fas ${success ? 'fa-check-circle' : 'fa-times-circle'}"></i>`;
  resultTitle.textContent = success ? '充值成功' : '充值失败';
  resultTitle.className = `result-title ${success ? 'success' : 'error'}`;
  rechargeResult.className = `recharge-result ${success ? 'success' : 'error'}`;
  resultMessage.textContent = message;
  rechargeResult.style.display = 'block';
}

// 初始化事件监听
function initEventListeners() {
  // 分类按钮
  document.querySelectorAll('.category-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      this.classList.add('clicked');
      setTimeout(() => this.classList.remove('clicked'), 300);
      document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      filterSoftware(this.dataset.category);
    });
  });
  
  // 搜索功能
  document.getElementById('searchBtn').addEventListener('click', function() {
    this.classList.add('clicked');
    setTimeout(() => this.classList.remove('clicked'), 300);
    performSearch();
  });
  
  document.getElementById('searchInput').addEventListener('keypress', e => {
    if (e.key === 'Enter') performSearch();
  });
}

// 签到功能
function signin() {
  const today = new Date().toDateString();
  if (localStorage.getItem('lastSigninDate') === today) {
    showNotification("今日已签到", "warning");
    return;
  }
  
  const signinReward = 5;
  if (!isAuthorized) {
    userGold += signinReward;
    localStorage.setItem('userGold', userGold);
    updateCurrencyDisplay();
  }
  
  localStorage.setItem('lastSigninDate', today);
  signinBtn.classList.add('disabled', 'clicked');
  signinBtn.innerHTML = '<i class="fas fa-check"></i> 今日已签到';
  setTimeout(() => signinBtn.classList.remove('clicked'), 300);
  showNotification(`签到成功！获得${signinReward}金币`, "success");
}

// 显示商品详情
function showAssetDetails(assetId) {
  const asset = currentAssets.find(a => a.id === assetId);
  if (!asset) return;
  
  modalTitle.textContent = asset.name;
  modalImage.src = asset.detailImageUrl;
  modalDesc.textContent = asset.desc;
  downloadButtonsContainer.innerHTML = '';
  
  asset.downloadOptions.forEach(option => {
    const button = document.createElement('button');
    button.className = 'download-option';
    button.innerHTML = `
      <div class="option-icon"><i class="${option.icon}"></i></div>
      <div class="option-name">${option.name}</div>
      <div class="option-desc">${option.desc}</div>
    `;
    button.addEventListener('click', function() {
      this.classList.add('clicked');
      setTimeout(() => this.classList.remove('clicked'), 300);
      showNotification(`跳转至下载链接: ${option.name}`);
      window.open(option.link, '_blank', 'noopener,noreferrer');
    });
    downloadButtonsContainer.appendChild(button);
  });
  
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

// 关闭弹窗
function closeModal() {
  modal.classList.remove('active');
  document.body.style.overflow = '';
}

// 打开充值弹窗
function openRecharge() {
  rechargeOptions.querySelectorAll('.recharge-option').forEach(opt => {
    opt.classList.remove('selected', 'disabled');
  });  
  selectedRechargeOption = null;
  document.getElementById('rechargeCode').value = '';
  
  // 根据主题显示/隐藏TSHB充值选项
  const tshbOptions = document.querySelectorAll('.recharge-option[data-type="tshb"]');
  if (isVioletTheme) {
    tshbOptions.forEach(opt => opt.style.display = 'block');
    document.querySelectorAll('.recharge-option:not([data-type="tshb"])').forEach(opt => {
      opt.style.display = 'none';
    });
  } else {
    tshbOptions.forEach(opt => opt.style.display = 'none');
    document.querySelectorAll('.recharge-option:not([data-type="tshb"])').forEach(opt => {
      opt.style.display = 'block';
    });
  }
  
  rechargeModal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

// 关闭充值弹窗
function closeRecharge() {
  rechargeModal.classList.remove('active');
  document.body.style.overflow = '';
}

// 打开兑换弹窗 - 修改：添加了可兑换灵蜕显示
function openExchange() {
  document.getElementById('currentGold').textContent = userGold;
  document.getElementById('exchangeGold').value = '';
  exchangeResult.style.display = 'none';
  
  // 添加最大可兑换灵蜕显示
  const maxTshb = Math.floor(userGold / 1.5);
  let maxTshbElement = document.getElementById('maxTshb');
  if (!maxTshbElement) {
    maxTshbElement = document.createElement('p');
    maxTshbElement.id = 'maxTshb';
    maxTshbElement.className = 'exchange-info';
    maxTshbElement.innerHTML = `<i class="fas fa-coins"></i> 最大可兑换灵蜕: <span id="maxTshbAmount">${maxTshb}</span>`;
    // 插入到当前金币显示的后面
    const currentGoldElement = document.getElementById('currentGold').parentNode;
    currentGoldElement.parentNode.insertBefore(maxTshbElement, currentGoldElement.nextSibling);
  } else {
    document.getElementById('maxTshbAmount').textContent = maxTshb;
  }
  
  // 添加兑换比例显示
  const exchangeInfo = document.getElementById('exchangeInfo');
  if (!exchangeInfo) {
    const infoDiv = document.createElement('div');
    infoDiv.id = 'exchangeInfo';
    infoDiv.className = 'exchange-info';
    infoDiv.innerHTML = '<i class="fas fa-info-circle"></i> 兑换比例: 1.5金币 = 1灵蜕';
    exchangeForm.insertBefore(infoDiv, exchangeForm.querySelector('button[type="submit"]'));
  }
  
  // 添加兑换计算显示
  const exchangeCalc = document.getElementById('exchangeCalc');
  if (!exchangeCalc) {
    const calcDiv = document.createElement('div');
    calcDiv.id = 'exchangeCalc';
    calcDiv.className = 'exchange-calc';
    calcDiv.innerHTML = '可兑换灵蜕: <span id="exchangeAmount">0</span>';
    exchangeForm.insertBefore(calcDiv, exchangeForm.querySelector('button[type="submit"]'));
  }
  
  // 更新兑换计算
  updateExchangeCalculation();
  
  // 绑定输入事件
  document.getElementById('exchangeGold').addEventListener('input', updateExchangeCalculation);
  
  exchangeModal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

// 更新兑换计算
function updateExchangeCalculation() {
  const goldInput = document.getElementById('exchangeGold');
  const goldValue = parseInt(goldInput.value) || 0;
  const exchangeAmount = Math.floor(goldValue / 1.5);
  document.getElementById('exchangeAmount').textContent = exchangeAmount;
}

// 关闭兑换弹窗
function closeExchange() {
  exchangeModal.classList.remove('active');
  document.body.style.overflow = '';
}

// 使用充值码充值
function rechargeWithCode(code) {
  // 必须选择充值档位才能充值
  if (!selectedRechargeOption) {
    showRechargeResult(false, "请先选择充值档位");
    return;
  }

  // 检查充值码是否已被使用
  if (usedRechargeCodes.includes(code)) {
    showRechargeResult(false, "该订单号已被使用，请再次充值");
    return;
  }

  // 验证订单号格式
  const validCodes = ['3Fg5h9Jk2L7q', '8RtY6uB3n9D2', '5mN7pQ2rT8v4', '1aS3dF5gH7j9', '005', '006', '007', '008'];
  if (!validCodes.includes(code)) {
    showRechargeResult(false, "无效的订单号格式");
    return;
  }

  // 执行充值逻辑（仅当未授权时添加货币）
  if (!isAuthorized) {
    if (selectedRechargeOption.type === "gold") {
      userGold += selectedRechargeOption.amount;
      localStorage.setItem('userGold', userGold);
    } else if (selectedRechargeOption.type === "diamond") {
      userDiamonds += selectedRechargeOption.amount;
      localStorage.setItem('userDiamonds', userDiamonds);
    } else if (selectedRechargeOption.type === "tshb") {
      userTSHB += selectedRechargeOption.amount;
      localStorage.setItem('userTSHB', userTSHB);
    }
  }

  // 记录已使用的充值码
  usedRechargeCodes.push(code);
  localStorage.setItem('usedRechargeCodes', JSON.stringify(usedRechargeCodes));
  
  // 更新显示
  updateCurrencyDisplay();
  
  // 显示成功信息
  const resultMessage = `充值成功！获得${selectedRechargeOption.amount}${
    selectedRechargeOption.type === 'gold' ? '金币' : 
    selectedRechargeOption.type === 'diamond' ? '钻石' : '灵蜕'
  }`;
  showRechargeResult(true, resultMessage);
  
  // 清空输入框并关闭弹窗
  document.getElementById('rechargeCode').value = "";
  closeRecharge();
}

// 金币兑换灵蜕
function exchangeGoldForTshb() {
  const goldToExchange = parseInt(document.getElementById('exchangeGold').value);
  
  if (isNaN(goldToExchange)) {
    showNotification("请输入有效的金币数量", "error");
    return;
  }
  
  if (goldToExchange < 3) {
    showNotification("最少需要3金币才能兑换", "error");
    return;
  }
  
  if (goldToExchange % 3 !== 0) {
    showNotification("金币数量需为3的倍数", "error");
    return;
  }
  
  if (userGold < goldToExchange) {
    showNotification("金币不足", "error");
    return;
  }
  
  // 计算兑换的灵蜕数量
  const tshbToReceive = Math.floor(goldToExchange / 1.5);
  
  // 更新用户货币
  userGold -= goldToExchange;
  userTSHB += tshbToReceive;
  localStorage.setItem('userGold', userGold);
  localStorage.setItem('userTSHB', userTSHB);
  
  // 更新显示
  updateCurrencyDisplay();
  document.getElementById('currentGold').textContent = userGold;
  
  // 更新最大可兑换灵蜕显示
  const newMaxTshb = Math.floor(userGold / 1.5);
  document.getElementById('maxTshbAmount').textContent = newMaxTshb;
  
  // 显示兑换结果
  document.getElementById('exchangedTshb').textContent = tshbToReceive;
  exchangeResult.style.display = 'block';
  
  // 3秒后隐藏结果
  setTimeout(() => {
    exchangeResult.style.display = 'none';
    closeExchange();
  }, 3000);
  
  showNotification(`成功兑换 ${tshbToReceive} 灵蜕！`, "success");
}

// 筛选图包
function filterSoftware(category) {
  const assetCards = document.querySelectorAll('.product-card');
  
  assetCards.forEach(card => {
    if (category === 'all' || card.dataset.category === category) {
      card.style.display = 'block';
      
      // 滚动到第一个可见商品
      if (category !== 'all') {
        setTimeout(() => {
          card.classList.add('highlight');
          window.scrollTo({
            top: card.offsetTop - 150,
            behavior: 'smooth'
          });
          
          // 移除高亮效果
          setTimeout(() => {
            card.classList.remove('highlight');
          }, 2000);
        }, 300);
      }
    } else {
      card.style.display = 'none';
    }
  });
}

// 执行搜索
function performSearch() {
  const query = document.getElementById('searchInput').value.trim().toLowerCase();
  if (!query) {
    // 如果搜索框为空，显示所有商品
    document.querySelectorAll('.product-card').forEach(card => {
      card.style.display = 'block';
    });
    return;
  }
  
  // 查找匹配的图包
  const assetCards = document.querySelectorAll('.product-card');
  let found = false;
  
  assetCards.forEach(card => {
    const name = card.dataset.name.toLowerCase();
    const desc = card.dataset.desc.toLowerCase();
    
    if (name.includes(query) || desc.includes(query)) {
      card.style.display = 'block';
      
      if (!found) {
        // 滚动到第一个匹配的商品
        card.classList.add('highlight');
        window.scrollTo({
          top: card.offsetTop - 150,
          behavior: 'smooth'
        });
        
        // 移除高亮效果
        setTimeout(() => {
          card.classList.remove('highlight');
        }, 2000);
        
        found = true;
      }
    } else {
      card.style.display = 'none';
    }
  });
  
  if (!found) {
    showNotification('未找到匹配的图包', "error");
  }
}

// 切换主题 - 修改：确保货币显示正常
function toggleTheme() {
  isVioletTheme = !isVioletTheme;
  localStorage.setItem('isVioletTheme', isVioletTheme);
  
  if (isVioletTheme) {
    document.body.classList.add('violet-theme');
    currentAssets = violetAssets;
  } else {
    document.body.classList.remove('violet-theme');
    currentAssets = moonAssets;
  }
  
  // 重新渲染商品
  currentPage = 1;
  renderProducts();
  updatePagination();
  
  // 确保货币显示不会被遮挡
  updateCurrencyDisplay();
}

// 更新分页控件
function updatePagination() {
  const totalPages = Math.ceil(currentAssets.length / itemsPerPage);
  
  // 更新页码按钮
  pageBtns.forEach((btn, index) => {
    if (index < totalPages) {
      btn.textContent = index + 1;
      btn.style.display = 'flex';
      btn.classList.toggle('active', index + 1 === currentPage);
    } else {
      btn.style.display = 'none';
    }
  });
  
  // 更新上一页/下一页按钮状态
  prevBtn.classList.toggle('disabled', currentPage === 1);
  nextBtn.classList.toggle('disabled', currentPage === totalPages);
}

// 上一页
function goToPrevPage() {
  if (currentPage > 1) {
    goToPage(currentPage - 1);
  }
}

// 下一页
function goToNextPage() {
  const totalPages = Math.ceil(currentAssets.length / itemsPerPage);
  if (currentPage < totalPages) {
    goToPage(currentPage + 1);
  }
}

// 跳转到指定页
function goToPage(page) {
  currentPage = page;
  renderProducts();
  updatePagination();
  
  // 滚动到顶部
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}
  </script>
</body>
</html>
